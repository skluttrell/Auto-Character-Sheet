<html>

	<head>
		<meta charset="UTF-8">
		<title>Auto Character Sheet</title>
		<style>
		/* Set button styles to a flat look */
			.edit_content button {
				padding: 0;
				border: none;
				font: inherit;
				color: inherit;
				background-color: transparent;
				cursor: pointer;
			}

			/* Rebuild the button/link styles from the ground up */
			.edit-button {
				/* inline-block keeps the height and width properties from block but allows elements to be displayed side-by-side with no line break as in inline */
				display: inline-block;
				text-align: center;
				text-decoration: none;
				/* padding for top and bottom is half the vertical size of the font (em) and left and right is the full width of the font */
				padding: 0.5em 1em;
				color: black;
			}

			/* Behavior when the button is clicked */
			.edit-button:active {
				transform: translateY(1px);
				color: red;
			}

			/* Behavior when button is focused by the keyboard or similar device */
			.edit-button:focus {
				outline: none;
				box-shadow: 0 0 0 3px rgba(225, 225, 225, 0.4);
			}

			/* Remove the focus style from non-keyboard interactions (nonstandard)*/
			.js-focus-visible .edit-button:focus:not(.focus-visible) {
				box-shadow: none;
			}

			.tab {
				overflow: hidden;
				border: 1px solid #ccc;
				background-color: #f1f1f1;
			}

			.tab button {
				background-color: inherit;
				float: left;
				border: none;
				outline: none;
				cursor: pointer;
				padding: 14px 16px;
				transition: 0.3;
			}

			.tab button:hover {
				background-color: #ddd;
			}

			.tab button.active {
				background-color: #ccc;
			}

			.tabcontent {
				display: none;
				padding: 6px 12px;
				border: 1px solid #ccc;
				border-top: none;
			}
		</style>
	</head>

	<body>
		<nav class="tab">
			<button class="tablinks active" onclick="openSection(event, 'section1')">Home</button>
			<button class="tablinks" onclick="openSection(event, 'section2')">Combat</button>
			<button class="tablinks" onclick="openSection(event, 'section3')">Features</button>
			<button class="tablinks" onclick="openSection(event, 'section4')">Proficiencies</button>
			<button class="tablinks" onclick="openSection(event, 'section5')">Spells</button>
			<button class="tablinks" onclick="openSection(event, 'section6')">Inventory</button>
			<button class="tablinks" onclick="openSection(event, 'section7')">Log</button>
		</nav><br>

		<span id="section1" name="character info" class="tabcontent edit-content" style="display: block;">
			<h1>Basic Character Information</h1><br>
			<p><button id="basic-name-arrow" name="basic" class="edit-button" type="button">↑</button>Name: <input id="basic-name-box" type="text" placeholder="character name" style="display: none;"><span id="basic-name-display" style="display: inline; text-transform: capitalize;"></span></p>
			<p><button id="basic-level-arrow" name="basic" class="edit-button" type="button">↑</button>Level: <input id="basic-level-box" type="number" min="1" style="display: none;"><span id="basic-level-display" style="display: inline;"></span></p>
			<p><button id="basic-race-arrow" name="basic" class="edit-button" type="button">↑</button>Race: <input id="basic-race-box" type="text" placeholder="character race" style="display: none;"><span id="basic-race-display" style="display: inline;"></span></p>
			<p><button id="basic-character_class-arrow" name="basic" class="edit-button" type="button">↑</button>Class: <input id="basic-character_class-box" type="text" placeholder="character class" style="display: none;"><span id="basic-character_class-display" style="display: inline;"></span></p>
			<p><button id="basic-background-arrow" name="basic" class="edit-button">↑</button>Background: <input id="basic-background-box" type="text" placeholder="character background" style="display: none;"><span id="basic-background-display" style="display: inline;"></span></p>
			<p><button id="basic-age-arrow" name="basic" class="edit-button">↑</button>Age: <input id="basic-age-box" type="number" min="0" style="display: none;"><span id="basic-age-display" style="display: inline;"></span></p>
			<p><button id="basic-build-arrow" name="basic" class="edit-button">↑</button>Build: <input id="basic-build-box" type="text" placeholder="height, weight, etc." style="display: none;"><span id="basic-build-display" style="display: inline;"></span></p>
			<p><button id="basic-alignment-arrow" name="basic" class="edit-button">↑</button>Alignment: <input id="basic-alignment-box" type="text" placeholder="character alignment" style="display: none;"><span id="basic-alignment-display" style="display: inline;"></span></p>
			<p><button id="basic-deity-arrow" name="basic" class="edit-button">↑</button>Deity: <input id="basic-deity-box" type="text" placeholder="who does this character worship?" style="display: none;"><span id="basic-deity-display" style="display: inline;"></span></p>
			<p><button id="basic-languages-arrow" name="basic" class="edit-button">↑</button> Languages: <input id="basic-languages-box" type="text" placeholder="spoken and written languages" style="display: none;"><span id="basic-languages-display" style="display: inline;"></span></p>
			<p><button id="basic-traits-arrow" name="basic" class="edit-button" type="button">↑</button>traits: <input id="basic-traits-box" type="text" placeholder="character trait" style="display: none;"></p>
			<span id="basic-traits-display"></span>
			<p><button id="basic-ideals-arrow" name="basic" class="edit-button">↑</button>Ideals: <input id="basic-ideals-box" type="text" placeholder="character ideals" style="display: none;"></p>
			<span id="basic-ideals-display"></span>
			<p><button id="basic-bonds-arrow" name="basic" class="edit-button">↑</button>Bonds: <input id="basic-bonds-box" type="text" placeholder="character bonds" style="display: none;"></p>
			<span id="basic-bonds-display"></span>
			<p><button id="basic-flaws-arrow" name="basic" class="edit-button">↑</button>Flaws: <input id="basic-flaws-box" type="text" placeholder="character flaws" style="display: none;"></p>
			<span id="basic-flaws-display"></span>
			<p><button id="basic-description-arrow" name="basic" class="edit-button">↑</button>Description:<br><input id="basic-description-box" type="textarea" rows="3" cols="20" spellcheck="true" placeholder="a brief description" style="display: none;"><span id="basic-description-display" style="display: inline;"></span></p>
			<br>

			<h1>Add discreet class features such as spell slots for spellcasters or rages for barbarians</h1><br>
			<p><select id="schema-box"></select></p>
			<p><button id="schema-button" type="button" class="edit-button">activate</button> <button id="schema-reset" type="button" class="edit-button">reset</button></p>

			<span id="schema-display"></span>

			<form id="new_schema-form" style="display: none;">
				<p><label for="new_schema-box">Name: </label><input id="new_schema-box" type="text" required></p>
				<p><label for="new_schema-display_in_section-box">Where would you like this to be displayed? </label><select id="new_schema-display_in_section-box" defaultValue="0"><option value="combat">Combat section</option><option value="spells">Spells section</option></select></p>
				<p><label for="new_schema-description-box">Brief Description: </label><input id="new_schema-description-box" type="text" required></p>
				<p><label for="new_schema-classes-box">To which class or classes does this belong: </label><input id="new_schema-classes-box" type="text"></p><br>
				<fieldset>
					<legend>Data per level</legend>
					<p>The following text input boxes are for all 20 levels of progression. If there are multiple units (such as spell slots per spell level), separate each number with a comma. e.g. at 20th-level the bard gets 4, 3, 3, 3, 3, 2, 2, 1, 1 spells for each of 1st through 9th spell levels. A space between the numbers is not necessary and will be filtered out.<br>
					<p>Please only use numbers (or commas) in these boxes, non-numeric characters might have undesired results.</p><br>
					<p><label for="new_schema-0-box">1st-level: </label><input id="new_schema-0-box" type="text" required></p>
					<p><label for="new_schema-1-box">2nd-level: </label><input id="new_schema-1-box" type="text" required></p>
					<p><label for="new_schema-2-box">3rd-level: </label><input id="new_schema-2-box" type="text" required></p>
					<p><label for="new_schema-3-box">4th-level: </label><input id="new_schema-3-box" type="text" required></p>
					<p><label for="new_schema-4-box">5th-level: </label><input id="new_schema-4-box" type="text" required></p>
					<p><label for="new_schema-5-box">6th-level: </label><input id="new_schema-5-box" type="text" required></p>
					<p><label for="new_schema-6-box">7th-level: </label><input id="new_schema-6-box" type="text" required></p>
					<p><label for="new_schema-7-box">8th-level: </label><input id="new_schema-7-box" type="text" required></p>
					<p><label for="new_schema-8-box">9th-level: </label><input id="new_schema-8-box" type="text" required></p>
					<p><label for="new_schema-9-box">10th-level: </label><input id="new_schema-9-box" type="text" required></p>
					<p><label for="new_schema-10-box">11th-level: </label><input id="new_schema-10-box" type="text" required></p>
					<p><label for="new_schema-11-box">12th-level: </label><input id="new_schema-11-box" type="text" required></p>
					<p><label for="new_schema-12-box">13th-level: </label><input id="new_schema-12-box" type="text" required></p>
					<p><label for="new_schema-13-box">14th-level: </label><input id="new_schema-13-box" type="text" required></p>
					<p><label for="new_schema-14-box">15th-level: </label><input id="new_schema-14-box" type="text" required></p>
					<p><label for="new_schema-15-box">16th-level: </label><input id="new_schema-15-box" type="text" required></p>
					<p><label for="new_schema-16-box">17th-level: </label><input id="new_schema-16-box" type="text" required></p>
					<p><label for="new_schema-17-box">18th-level: </label><input id="new_schema-17-box" type="text" required></p>
					<p><label for="new_schema-18-box">19th-level: </label><input id="new_schema-18-box" type="text" required></p>
					<p><label for="new_schema-19-box">20th-level: </label><input id="new_schema-19-box" type="text" required></p>
				</fieldset><br>

				<p><label for="new_schema-active-box">Do you wish to have this new character information available? </label><input id="new_schema-active-box" type="checkbox" checked></p><br>

				<p><button id="new_schema-button" type="button" class="edit-button">done</button> <input id="schema-reset-button" type="reset" class="edit-button" onclick="update([ 'schema' ])"></p>
			</form>
		</span>

		<span id="section2" name="stats" class="tabcontent edit-content">
			<span id="combat-schemas-display"></span>

			<h1>Ability Scores</h1><br>
			<table id="ability_stats-table">
				<thead>
					<tr><th><button id="ability_stats-arrow" class="edit-button">↑</button></th><th>Ability</th><th>Base</th><th>Modifier</th><th>Save</th><th>Adjustment</th></tr>
				</thead>
				<tbody>
					<tr><td><input id="ability_stats-strength-save-box" type="checkbox" style="display: none;"><span id="ability_stats-strength-checkmark" style="display: none;">✓</span></td><td>Strength</td><td><input id="ability_stats-strength-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-strength-display"></span></td><td id="ability_stats-strength-modifier-display"></td><td id="ability_stats-strength-save-display"></td><td><input id="ability_stats-adjust-strength-box" name="ability_stats-adjust" type="number"></td></tr>
					<tr><td><input id="ability_stats-dexterity-save-box" type="checkbox" style="display: none;"><span id="ability_stats-dexterity-checkmark" style="display: none;">✓</span></td><td>Dexterity</td><td><input id="ability_stats-dexterity-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-dexterity-display"></span></td><td id="ability_stats-dexterity-modifier-display"></td><td id="ability_stats-dexterity-save-display"></td><td><input id="ability_stats-adjust-dexterity-box" name="ability_stats-adjust" type="number"></td></tr>
					<tr><td><input id="ability_stats-constitution-save-box" type="checkbox" style="display: none;"><span id="ability_stats-constitution-checkmark" style="display: none;">✓</span></td><td>Constitution</td><td><input id="ability_stats-constitution-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-constitution-display"></span></td><td id="ability_stats-constitution-modifier-display"></td><td id="ability_stats-constitution-save-display"></td><td><input id="ability_stats-adjust-constitution-box" name="ability_stats-adjust" type="number"></td></tr>
					<tr><td><input id="ability_stats-intelligence-save-box" type="checkbox" style="display: none;"><span id="ability_stats-intelligence-checkmark" style="display: none;">✓</span></td><td>Intelligence</td><td><input id="ability_stats-intelligence-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-intelligence-display"></span></td><td id="ability_stats-intelligence-modifier-display"></td><td id="ability_stats-intelligence-save-display"></td><td><input id="ability_stats-adjust-intelligence-box" name="ability_stats-adjust" type="number"></td></tr>
					<tr><td><input id="ability_stats-wisdom-save-box" type="checkbox" style="display: none;"><span id="ability_stats-wisdom-checkmark" style="display: none;">✓</span></td><td>Wisdom</td><td><input id="ability_stats-wisdom-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-wisdom-display"></span></td><td id="ability_stats-wisdom-modifier-display"></td><td id="ability_stats-wisdom-save-display"></td><td><input id="ability_stats-adjust-wisdom-box" name="ability_stats-adjust" type="number"></td></tr>
					<tr><td><input id="ability_stats-charisma-save-box" type="checkbox" style="display: none;"><span id="ability_stats-charisma-checkmark" style="display: none;">✓</span></td><td>Charisma</td><td><input id="ability_stats-charisma-box" type="number" value="0" min="1" style="display: none;"><span id="ability_stats-charisma-display"></span></td><td id="ability_stats-charisma-modifier-display"></td><td id="ability_stats-charisma-save-display"></td><td><input id="ability_stats-adjust-charisma-box" name="ability_stats-adjust" type="number"></td></tr>
				</tbody>
			</table><br>

			<h1>Combat Stats</h1><br>
			<ul>
				<li>Initiative: <span id="combat_stats-initiative-display"></span></li>
				<li><button id="combat_stats-hit_points-arrow" name="combat_stats" class="edit-button">↑</button> Hit Points: <input id="combat_stats-hit_points-box" type="number" style="display: none;"><span id="combat_stats-hit_points-display"></span> Adjustment: <input id="combat_stats-hit_points-adjust" name="combat_stats-adjust" type="number"> Current: <span id="combat_stats-hit_points-current"></span> <button id="combat_stats-hit_points-notes-arrow" name="combat_stats-notes" class="edit-button">→</button><input id="combat_stats-hit_points-notes-box" type="text" style="display: none;"> <span id="combat_stats-hit_points-notes-display"></span></li>
				<li><button id="combat_stats-hit_dice-arrow" name="combat_stats" class="edit-button">↑</button>Hit Dice: <input id="combat_stats-hit_dice-adjust" name="combat_stats-adjust" type="number"> <select id="combat_stats-hit_dice-box" defaultValue="0" style="display: none;"><option value="d4">d4</option><option value="d6">d6</option><option value="d8">d8</option><option value="d10">d10</option><option value="d12">d12</option></select><span id="combat_stats-hit_dice-display"></span></li>
				<li>Armor Class: <span id="combat_stats-armor_class-display"></span> Adjust: <input id="combat_stats-armor-adjust" type="number"> <button id="combat_stats-armor_adjustment-notes-arrow" name="combat_stats-notes" class="edit-button">→</button><input id="combat_stats-armor_adjustment-notes-box" type="text" style="display: none;"> <span id="combat_stats-armor_adjustment-notes-display"></span></li>
				<li><button id="combat_stats-speed-arrow" name="combat_stats" class="edit-button">↑</button> Speed: <input id="combat_stats-speed-box" type="number" style="display: none;"><span id="combat_stats-speed-display"></span> Adjust: <input id="combat_stats-speed-adjust" name="combat_stats-adjust" type="number"> Current: <span id="combat_stats-speed-current"></span> <button id="combat_stats-speed-notes-arrow" name="combat_stats-notes" class="edit-button">→</button><input id="combat_stats-speed-notes-box" type="text" style="display: none;"> <span id="combat_stats-speed-notes-display"></span></li>
				<li>Passive Perception: <span id="combat_stats-passive_perception-display"></span></li>
			</ul><br>

			<h1>Weapons</h1><br>
			<table id="weapons-table">
				<thead>
					<tr><th>Weapon</th><th>Hit Modifier</th><th>Damage</th><th>Range</th><th>Properties</th></tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</span>

		<span id="section3" name="features" class="tabcontent edit-content">
			<h1>Character Features</h1><br>
			<span id="features-display"></span>

			<h1>Add or edit a feature</h1><br>
			<form id="features-form">
				<p><label for="features-name-box">Name: </label><input id="features-name-box" type="text" placeholder="What is the name of the feature?" required></p>
				<p><label for="features-description-box">Description: </label><input id="features-description-box" type="textarea" placeholder="What does this feature do?" rows="3" cols="20" spellcheck="true" required></p>
				<p><label for="features-quantity-box">How many do you get per rest period? </label><input id="features-quantity-box" type="number" min="0" value="0"></p>
				<p><label for="features-replenish-box">Do they replenish after a short or long rest? </label><select id="features-replenish-box" defaultValue="0"><option value="">Select</option><option value="short">Short rest</option><option value="long">Long rest</option></select></p><br>
				<p><button id="features-button" type="button" class="edit-button" value="">done</button> <input id="features-reset-button" type="reset" class="edit-button"></p>
			</form>
		</span>

		<span id="section4" name="proficiencies" class="tabcontent edit-content">
			<h1>Proficiencies</h1><br>
			<table id="proficiencies-table">
				<thead>
					<tr><th><button id="proficiencies-arrow" type="button" class="edit-button">↑</button></th><th>Name</th><th>Governing Stat</th><th>Check</th></tr>
				</thead>
				<tbody></tbody>
			</table><br>
			<p><button id="other-proficiencies-arrow" type="button">↑</button>Other proficiencies such as armor, weapons, and tools: <span id="other-proficiencies-display"></span><input id="other-proficiencies-box" type="text" style="display: none;"></p>
		</span>

		<span id="section5" name="spells" class="tabcontent edit-content">
			<span id="spell-schemas-display"></span>

			<span id="spells-ability">
				<h1>Spellcasting Ability (<button id="spells-ability-modifier-arrow" type="button">↑</button>&nbsp;<select id="spells-ability-modifier-box" style="display: none;"><option value="intelligence">Intelligence</option><option value="wisdom">Wisdom</option><option value="charisma">Charisma</option></select> <span id="spells-ability-modifier-display" style="text-transform: capitalize;"></span>)</h1><br>

				<ul>
					<li>Spell save DC: <span id="spells-save-dc-display"></span></li>
					<li>Spell attack modifier: <span id="spells-attack-modifier-display"></span></li>
				</ul><br>
				<p><button id="spells-components-arrow" type="button">↑</button> Spell Components: <input id="spells-components-box" type="text" style="display: none;"><span id="spells-components-display"></span></p>
			</span><br>

			<span id="invocations-display"></span>

			<span id="spells-active-display"></span>

			<span id="spells-known-display"></span>

			<h1>Add or edit a spell or invocation</h1><br>
			<form id="spells-form">
				<p><label for="spells-name-box">Name: </label><input id="spells-name-box" type="text" required></p>
				<p><label for="spells-type-box">Is this a spell or invocation? </label><select id="spells-type-box" defaultValue="0"><option value="spell">Spell</option><option value="invocation">Invocation</option></select></p>
				<p><label for="spells-level-box">Level: </label><select id="spells-level-box" defaultValue="0"><option value="">Select</option><option value="cantrip">Cantrip</option><option value="1st">1st</option><option value="2nd">2nd</option><option value="3rd">3rd</option><option value="4th">4th</option><option value="5th">5th</option><option value="6th">6th</option><option value="7th">7th</option><option value="8th">8th</option><option value="9th">9th</option></select></p>
				<p><label for="spells-school-box">school: </label><select id="spells-school-box" defaultValue="0"><option value="">Select</option><option value="abjuration">Abjuration</option><option value="conjuration">Conjuration</option><option value="divination">Divination</option><option value="enchantment">Enchantment</option><option value="evocation">Evocation</option><option value="illusion">Illusion</option><option value="necromancy">Necromancy</option><option value="transmutation">Transmutation</option></select></p>
				<p><label for="spells-ritual_tag-box">Can this spell be cast using a ritual? </label><input id="spells-ritual_tag-box" type="checkbox"></p>
				<p><label for="spells-casting_time-box">Casting Time: </label><input id="spells-casting_time-box" type="text"></p>
				<p><label for="spells-range-box">Range: </label><input id="spells-range-box" type="text"></p>
				<p>Components: <label for="spells-verbal-box">Verbal </label><input id="spells-verbal-box" type="checkbox"> <label for="spells-somatic-box">Somatic </label><input id="spells-somatic-box" type="checkbox"> <label for="spells-materials-box">Materials </label><input id="spells-materials-box" type="text"></p>
				<p><label for="spells-duration-box">Duration: </label><input id="spells-duration-box" type="text"></p>
				<p><label for="spells-description-box">Description:<br></label><input id="spells-description-box" type="textarea" rows="3" cols="20"></p><br>
				<p><button id="spells-button" type="button" class="edit-button" value="">done</button> <input id="spells-reset-button" type="reset" class="edit-button"></p>
			</form>
		</span>

		<span id="section6" name="inventory" class="tabcontent edit-content">
			<h1>Inventory</h1><br>
			<table id="inventory-table">
				<thead>
					<tr><td>Item Type</th><th>Contents</th></tr>
				</thead>
				<tbody>
				</tbody>
			</table><br>
			<p><button id="gold-arrow" type="button" class="edit-button">↑</button>Gold: <input id="gold-box" type="text" style="display: none;"><span id="gold-display"></span> Carrying weight: <span id="inventory-weight-display"></span> lbs.</p><br>

			<h1>Add or edit an item in your inventory</h1><br>
			<form id="inventory-form">
				<fieldset>
					<legend>Select the type of item</legend>
					<p><label for="inventory-type-box">Select the item type (armor, weapon, or other): </label><select id="inventory-type-box" defaultValue="0"><option value="armor">Armor</option><option value="weapon">Weapon</option><option value="other">Other</option></select></p>
				</fieldset><br>

				<fieldset>
					<legend>These are traits all items share.</legend>
					<p><label for="inventory-name-box">Item name:</label><input id="inventory-name-box" type="text" required></p>
					<p>The following ar optional.</p>
					<p><label for="inventory-description-box">Description:<br></label><input id="inventory-description-box" type="textarea" rows="3" cols="20"></p>
					<p><label for="inventory-weight-box">Weight: </label><input id="inventory-weight-box" type="number" min="0" value="0"> lbs <label for="inventory-cost-box">Cost: </label><input id="inventory-cost-box" type="text" size="6"> <label for="inventory-quantity-box">Quantity: </label><input id="inventory-quantity-box" type="number" min="1" value="1"></p>
				</fieldset><br>

				<fieldset>
					<legend>Set these to keep track of armor attributes.</legend>
					<p><label for="inventory-style_armor-box">Select armor type: </label><select id="inventory-style_armor-box" defaultValue="0"><option value="light">Light</option><option value="medium">Medium</option><option value="heavy">Heavy</option><option value="shield">Shield</option></select></p>
					<p><label for="inventory-armor_class-box">Base armor class: </label><input id="inventory-armor_class-box" type="number" value="0"></p>
					<p><label for="inventory-add_dex_mod-box">Add your dex modifier? </label><input id="inventory-add_dex_mod-box" type="checkbox"> <label for="inventory-max_dex_bonus-box">Maximum dexterity bonus: </label><input id="inventory-max_dex_bonus-box" type="number" min="0" value="0" disabled></p>
					<p><label for="inventory-stealth_disadv-box">Does this armor impose disadvantage on stealth? </label><input id="inventory-stealth_disadv-box" type="checkbox"></p>
					<p><label for="inventory-active-box">Would you like to equip this armor? </label><input id="inventory-active-box" type ="checkbox"></p>
				</fieldset><br>

				<fieldset>
					<legend>Set these to keep track of weapon attributes.</legend>
					<p><label for="inventory-style_weapon-box">Select weapon type: </label><select id="inventory-style_weapon-box" defaultValue="0"><option value="simple">Simple</option><option value="martial">Martial</option></select></p>
					<p><label for="inventory-sub_type-weapon-box">Is this a melee or ranged weapon? </label><select id="inventory-sub_type-box" defaultValue="0"><option value="melee">Melee</option><option value="ranged">Ranged</option></select></p>
					<p><label for="inventory-proficient-box">Are you proficient with this weapon? </label><input id="inventory-proficient-box" type="checkbox" checked></p>
					<p><label for="inventory-damage-box">The damage roll and type (e.g. 1d8 piercing): </label><input id="inventory-damage-box" type="text"></p>
					<p>If this is a ranged weapon or one with the thrown property, what is its range? <label for="inventory-min-box">min: </label><input id="inventory-min-box" type="number" min="0" value="0"> / <label for="inventory-max-box">max: </label><input id="inventory-max-box" type="number" min="0" value="0"></p>
					<p><label for="inventory-properties-box">If this weapon has any other properties (e.g. light, finesse, or versatile): </label><input id="inventory-properties-box" type="text"></p>
				</fieldset><br>

				<p><button id="inventory-button" type="button" class="edit-button" value="">done</button> <input id="inventory-reset-button" type="reset" class="edit-button"></p>
			</form>
		</span>

		<span id="section7" name="log" class="tabcontent edit-content">
			<h1>Log Entries</h1><br>
			<span id="log-display" style="display: block"></span><br>
			<p><input id="log-box" type="text" placeholder="Create log entry"></p>
			<p><button id="log-button" type="button" class="edit-button">submit</button><button id="log-export" type="button" class="edit-button">export log</button><button id="log-clear" type="button" class="edit-button">clear log</button></p>
		</span>

		<br>
		<nav id="footer-navigation" class="edit-content">
			<hr>
			<p><button id="remove-data-button" type="button" class="edit-button" onclick="clearData()">Clear character data</button></p>
			<p><button id="export-button" type="button" class="edit-button" onclick="copyToClipboard(JSON.stringify(CharacterInfo))">Export character data to clipboard</button></p>
			<p><label for="import-file-box">Import character data from file: </label><input id="import-file-box" type="file" accept="text/plain"></p>
		</nav>
		<div id="test"></div>

		<script>
			var CharacterInfo = {
				version: "11.1.2020.1",
				basic: {
					name: "",
					level: 1,
					race: "",
					character_class: "",
					background: "",
					age: 0,
					build: "",
					alignment: "",
					deity: "",
					languages: "",
					traits: [],
					ideals: [],
					bonds: [],
					flaws: [],
					description: "",
				},
				combat_stats: {
					hit_points: [ 0, 0, "" ],
					hit_dice: [ "d4", 1 ],
					speed: [ 0, 0, "" ],
					armor_adjustment: [10, 0, ""],
					spellcasting_ability_modifier: "intelligence",
					spell_components: ""
				},
				ability_stats: {
					strength: [0, 0, false],
					dexterity: [0, 0, false],
					constitution: [0, 0, false],
					intelligence: [0, 0, false],
					wisdom: [0, 0, false],
					charisma: [0, 0, false]
				},
				proficiencies: {
					athletics: [ "strength", false],
					intimidation: ["charisma", false],
					medicine: ["wisdom", false],
					perception: ["wisdom", false],
					acrobatics: ["dexterity", false],
					animal_handling: ["wisdom", false],
					arcana: ["intelligence", false],
					deception: ["charisma", false],
					history: ["intelligence", false],
					insight: ["wisdom", false],
					investigation: ["intelligence", false],
					nature: ["intelligence", false],
					performance: ["charisma", false],
					persuasion: ["charisma", false],
					religion: ["intelligence", false],
					sleight_of_hand: ["dexterity", false],
					stealth: ["dexterity", false],
					survival: ["wisdom", false],
					other: ""
				},
				discreet_schemas: [
					{ name: "spellcaster", description: "Spell slots by spell level", active: false, display_in_section: "spells", list_by_level: [[ "2", "0", "0", "0", "0", "0", "0", "0", "0" ], [ "3", "0", "0", "0", "0", "0", "0", "0", "0" ], [ "4", "2", "0", "0", "0", "0", "0", "0", "0" ], [ "4", "3", "0", "0", "0", "0", "0", "0", "0" ], [ "4", "3", "2", "0", "0", "0", "0", "0", "0" ], [ "4", "3", "3", "0", "0", "0", "0", "0", "0" ], [ "4", "3", "3", "1", "0", "0", "0", "0", "0" ], [ "4", "3", "3", "2", "0", "0", "0", "0", "0" ], [ "4", "3", "3", "3", "1", "0", "0", "0", "0" ], [ "4", "3", "3", "3", "2", "0", "0", "0", "0" ], [ "4", "3", "3", "3", "2", "1", "0", "0", "0" ], [ "4", "3", "3", "3", "2", "1", "0", "0", "0" ], [ "4", "3", "3", "3", "2", "1", "1", "0", "0" ], [ "4", "3", "3", "3", "2", "1", "1", "0", "0" ], [ "4", "3", "3", "3", "2", "1", "1", "1", "0" ], [ "4", "3", "3", "3", "2", "1", "1", "1", "0" ], [ "4", "3", "3", "3", "2", "1", "1", "1", "1" ], [ "4", "3", "3", "3", "3", "1", "1", "1", "1" ], [ "4", "3", "3", "3", "3", "2", "1", "1", "1" ], [ "4", "3", "3", "3", "3", "2", "2", "1", "1" ]], classes: "bard, cleric, druid, sorcerer, and wizard" },
					{ name: "secondary caster", description: "Spell slots by spell level", active: false, display_in_section: "spells", list_by_level: [[ "0", "0", "0", "0", "0" ], [ "2", "0", "0", "0", "0" ], [ "3", "0", "0", "0", "0" ], [ "3", "0", "0", "0", "0" ], [ "4", "2", "0", "0", "0" ], [ "4", "2", "0", "0", "0" ], [ "4", "3", "0", "0", "0" ], [ "4", "3", "0", "0", "0" ], [ "4", "3", "2", "0", "0" ], [ "4", "3", "2", "0", "0" ], [ "4", "3", "3", "0", "0" ], [ "4", "3", "3", "0", "0" ], [ "4", "3", "3", "1", "0" ], [ "4", "3", "3", "1", "0" ], [ "4", "3", "3", "2", "0" ], [ "4", "3", "3", "2", "0" ], [ "4", "3", "3", "3", "1" ], [ "4", "3", "3", "3", "1" ], [ "4", "3", "3", "3", "2" ], [ "4", "3", "3", "3", "2" ]], classes: "paladin and ranger" },
					{ name: "minor caster", description: "Spell slots by spell level", active: false, display_in_section: "spells", list_by_level: [[ "2", "0", "0", "0" ], [ "3", "0", "0", "0" ], [ "3", "0", "0", "0" ], [ "3", "0", "0", "0" ], [ "4", "2", "0", "0" ], [ "4", "2", "0", "0" ], [ "4", "2", "0", "0" ], [ "4", "3", "0", "0" ], [ "4", "3", "0", "0" ], [ "4", "3", "0", "0" ], [ "4", "3", "2", "0" ], [ "4", "3", "2", "0" ], [ "4", "3", "2", "0" ], [ "4", "3", "3", "0" ], [ "4", "3", "3", "0" ], [ "4", "3", "3", "0" ], [ "4", "3", "3", "1" ], [ "4", "3", "3", "1" ]], classes: "fighter (eldritch knight) and rogue (arcane trickster)" },
					{ name: "rages", description: "Barbarian rages per rest period", active: false, display_in_section: "combat", list_by_level: [ "2", "2", "3", "3", "3", "4", "4", "4", "4", "4", "4", "5", "5", "5", "5", "5", "6", "6", "6", "unlimited" ], classes: "barbarian" },
					{ name: "rage damage", description: "Extra damage wile inraged", active: false, display_in_section: "combat", list_by_level: [ "+2", "+2", "+2", "+2", "+2", "+2", "+2", "+2", "+3", "+3", "+3", "+3", "+3", "+3", "+3", "+4", "+4", "+4", "+4", "+5" ], classes: "barbarian" },
					{ name: "martial arts", description: "Damage for unarmed or monk weapons", active: false, display_in_section: "combat", list_by_level: [ "1d4", "1d4", "1d4", "1d4", "1d6", "1d6", "1d6", "1d6", "1d6", "1d6", "1d8", "1d8", "1d8", "1d8", "1d8", "1d8", "1d10", "1d10", "1d10", "1d10" ], classes: "monk" },
					{ name: "points", description: "Points to spend on class features", active: false, display_in_section: "combat", list_by_level: [ "0", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20" ], classes: "monk \"ki points\", sorcerer \"sorcerer points\"" },
					{ name: "unarmored movement", description: "Extra speed while unarmored", active: false, display_in_section: "combat", list_by_level: [ "+10 ft.", "+10 ft.", "+10 ft.", "+10 ft.", "+10 ft.", "+15 ft.", "+15 ft.", "+15 ft.", "+15 ft.", "+20 ft.", "+20 ft.", "+20 ft.", "+20 ft.", "+25 ft.", "+25 ft.", "+25 ft.", "+25 ft.", "+30 ft.", "+30 ft.", "+30 ft." ], classes: "monk" },
					{ name: "sneak attack", description: "Extra damage for sneaking around your opponent", active: false, display_in_section: "combat", list_by_level: [ "1d6", "1d6", "2d6", "2d6", "3d6", "3d6", "4d6", "4d6", "5d6", "5d6", "6d6", "6d6", "7d6", "7d6", "8d6", "8d6", "9d6", "9d6", "10d6", "10d6" ], classes: "rogue" },
					{ name: "spell slots", description: "Spell slots available", active: false, display_in_section: "spells", list_by_level: [ "1", "2", "2", "2", "2", "2", "2", "2", "2", "2", "3", "3", "3", "3", "3", "3", "4", "4", "4", "4" ], classes: "warlock" },
					{ name: "slot level", description: "Maximum spell level", active: false, display_in_section: "spells", list_by_level: [ "1st", "1st", "2nd", "2nd", "3rd", "3rd", "4th", "4th", "5th", "5th", "5th", "5th", "5th", "5th", "5th", "5th", "5th", "5th", "5th", "5th" ], classes: "warlock" },
					{ name: "invocations known", description: "Number of invocations", active: false, display_in_section: "spells", list_by_level: [ "0", "2", "2", "2", "3", "3", "4", "4", "5", "5", "5", "6", "6", "6", "7", "7", "7", "8", "8", "8" ], classes: "warlock" },
					{ name: "cantrips known", description: "Number of cantrips", active: false, display_in_section: "spells", list_by_level: [ "2", "2", "2", "3", "3", "3", "3", "3", "3", "4", "4", "4", "4", "4", "4", "4", "4", "4", "4", "4" ], classes: "bard and druid" },
					{ name: "cantrips known", description: "Number of cantrips", active: false, display_in_section: "spells", list_by_level: [ "3", "3", "3", "4", "4", "4", "4", "4", "4", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5" ], classes: "cleric, warlock, and wizard" },
					{ name: "cantrips known", description: "Number of cantrips", active: false, display_in_section: "spells", list_by_level: [ "4", "4", "4", "5", "5", "5", "5", "5", "5", "6", "6", "6", "6", "6", "6", "6", "6", "6", "6", "6" ], classes: "sorcerer" },
					{ name: "cantrips known", description: "Number of cantrips", active: false, display_in_section: "spells", list_by_level: [ "0", "0", "2", "2", "2", "2", "2", "2", "2", "3", "3", "3", "3", "3", "3", "3", "3", "3", "3", "3" ], classes: "fighter (eldritch knight)" },
					{ name: "cantrips known", description: "Number of cantrips", active: false, display_in_section: "spells", list_by_level: [ "0", "0", "3", "3", "3", "3", "3", "3", "3", "4", "4", "4", "4", "4", "4", "4", "4", "4", "4", "4" ], classes: "rogue (arcane trickster)" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "0", "2", "3", "3", "4", "4", "5", "5", "6", "6", "7", "7", "8", "8", "9", "9", "10", "10", "11", "11" ], classes: "ranger" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "12", "13", "13", "14", "14", "15", "15", "15", "15" ], classes: "sorcerer" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "2", "3", "4", "5", "6", "7", "8", "9", "10", "10", "11", "11", "12", "12", "13", "13", "14", "14", "15", "15" ], classes: "warlock" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "4", "5", "6", "7", "8", "9", "10", "11", "12", "14", "15", "15", "16", "18", "19", "19", "20", "22", "22", "22" ], classes: "bard" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "0", "0", "3", "4", "4", "4", "5", "6", "6", "7", "8", "8", "9", "10", "10", "11", "11", "11", "12", "13" ], classes: "rogue (arcane trickster)" },
					{ name: "spells known", description: "Number of spells", active: false, display_in_section: "spells", list_by_level: [ "0", "0", "3", "4", "4", "4", "5", "5 + 1", "5 + 1", "6 + 1", "7 + 1", "7 + 1", "8 + 1", "8 + 2", "8 + 2", "9 + 2", "9 + 2", "9 + 2", "10 + 2", "10 + 3" ], classes: "fighter (eldritch knight)" }
				],
				features: [],
				inventory: [],
				spells: [],
				gold: "",
				log: []
			};

			// ability_stats: name (key), score (integer, index 0), alter_by (integer, index 1), and save (boolean, index 2)
			// armor_adjustment: base unarmored (int), adjustment (int), notes (string)
			// inventory: name (string), description (string), active (boolean), cost (string), armor_class (integer), add_dex_mod (boolean), max_dex_bonus (integer), stealth_disadv (boolean), weight (integer), damage (string), style (string), range (list, integers), properties (string), proficient (boolean), and quantity (integer)
			// feature: name (string), description (string), quantity (list of integers), and replenish (string)
			// spell: name (string), type (string), level (string), school (string), ritual_tag (boolean), casting_time (string), range (string), verbal (boolean), somatic (boolean), materials (string), duration (string), description (string), quantity (integer), and active (boolean)

		function checkVersion(newObj, oldObj) {
			function merge(newObj, oldObj) {
				for (key in newObj) if (key !== "version") {
					if (typeof newObj[key] === "object") {
						// If this is a list rathere than a dictionary style object then check for nonexisting values and add them if they don't exist
						// This is because some list iterators and their values would not pass the condition and be copied
						if (Array.isArray(newObj[key])) {
							if (oldObj.hasOwnProperty(key) && JSON.stringify(newObj[key]) !== JSON.stringify(oldObj[key])) {
								newObj[key] = oldObj[key];
							}
						} else { // This is a dictionary style object so just keep digging down using recursion
							merge(newObj[key], oldObj[key]);
						}
					} else if (oldObj.hasOwnProperty(key) && newObj[key] !== oldObj[key]) {
						newObj[key] = oldObj[key];
					}
				}
			}

				// Check the version and if there is a newer version, display a message that warns the user
				if (newObj["version"] !== oldObj["version"]) {
					alert("This is a newer version. Please check your character data to ensure that it transfered properly.");
				}
				merge(newObj, oldObj);
			}

			document.getElementById("import-file-box").addEventListener("change", function () {
				var reader = new FileReader();
				reader.onload = function () {
					checkVersion(CharacterInfo, JSON.parse(reader.result));
					localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo));
				}
				reader.readAsText(this.files[0]);
				this.value = this.defaultValue;
				location.reload();
			});

				// Get the file name minus the extension
				let url = window.location.pathname;
				let storageName = url.substring(url.lastIndexOf("/") + 1).split(".")[0];
			let retrieveData

			if (storageName !== "auto-character-sheet") {
				retrieveData = localStorage.getItem("CharacterInfo" + storageName);

				if (retrieveData) {
					checkVersion(CharacterInfo, JSON.parse(retrieveData));
				}
			}

			var elements;
			var info;
			var i, ii, iii;
			const NUMBER_PER_PAGE = 20;
			var TOTAL_PAGES;
			var PAGE;

			update([ "basic", "schema", "ability_stats", "combat_stats", "weapons", "features", "proficiencies", "spells", "inventory", "gold", "combat_schemas", "spells_schemas", "log" ]); // Initialize all the displayes

			function clearData() {
				if (storageName !== "auto-character-sheet" && confirm("Are you absolutely sure you want to erase this character data?")) {
				//localStorage.clear();
						localStorage.removeItem("CharacterInfo" + storageName);
					location.reload();
				}
			}

			elements = document.getElementsByName("basic");
			for (i = 0; i < elements.length; i++) {
				elements[i].addEventListener("click", function() {
					let name = event.target.id.split("-")[1];
					let arrow = document.getElementById("basic-" + name + "-arrow");
					display = document.getElementById("basic-" + name + "-display");
					let box = document.getElementById("basic-" + name + "-box");
					info = CharacterInfo.basic;

					if (arrow.innerHTML === "↑") { // Collect the information
						arrow.innerHTML = "↓"; // To signify that this character attribute is being edited
						box.value = (typeof info[name] !== "object") ? display.innerHTML : ""; // Place the current value in the edit box
						box.style.display = "inline";

						// Hide the value display and show the edit box, focus on it, and select whatever is in it.
						box.focus();
						box.select();
						display.style.display = (typeof info[name] !== "object") ? "none" : "initial";
					} else { // Save and display
						// Depending on the type of info, different things need to happen: objects need to push to a list and numbers need to be parsed to integers
						if (typeof info[name] === "object" && box.value) { info[name].push(box.value); }
						else if (typeof info[name] === "number") { info[name] = parseInt(box.value); }
							else { info[name] = box.value; }
							update([ "basic" ]); // Update the character sheet
					}
				});
			}

			document.getElementById("schema-box").addEventListener("change", function() {
				let box = document.getElementById("schema-box");
				let button = document.getElementById("schema-button");
				let display = document.getElementById("schema-display");
				display.innerHTML = "";
				let form = document.getElementById("new_schema-form");
				info = CharacterInfo.discreet_schemas;

				if (box.value) {
					if (box.value === "new_schema") {
						display.style.display = "none";
						form.style.display = "block";
						form.reset();
						button.disabled = true;
					} else {
						button.innerHTML = (info[box.value].active) ? "deactivate" : "activate";
						button.disabled = false;
						form.style.display = "none";
						display.style.display = "block";
						display.appendChild(formatSchema(info[box.value]));
					}
				} else {
					display.style.display = "none";
					form.style.display = "none";
					button.disabled = true;
				}
			});

			document.getElementById("schema-button").addEventListener("click", function() {
				let box = document.getElementById("schema-box");
				let button = document.getElementById("schema-button");
				info = CharacterInfo.discreet_schemas;

				if (button.innerHTML === "activate") {
					button.innerHTML = "deactivate";
					info[box.value].active = true;
				} else {
				button.innerHTML = "activate";
				info[box.value].active = false;
				}
				update([ info[box.value].display_in_section + "_schemas" ]);
			});

			document.getElementById("schema-reset").addEventListener("click", function() {
				document.getElementById("schema-display").style.display = "none";
				document.getElementById("new_schema-form").style.display = "none";
				document.getElementById("schema-button").disabled = true;
				document.getElementById("schema-box").value = "";
			});

			document.getElementById("ability_stats-arrow").addEventListener("click", function() {
				let info = CharacterInfo.ability_stats;
				let keys = Object.keys(info);

				if (document.getElementById("ability_stats-arrow").innerHTML === "↑") { // Display the edit boxes
					document.getElementById("ability_stats-arrow").innerHTML = "↓";

					for (i = 0; i < keys.length; i++) {
						document.getElementById("ability_stats-" + keys[i] + "-save-box").style.display = "inline";
						document.getElementById("ability_stats-" + keys[i] + "-box").style.display = "inline";
						document.getElementById("ability_stats-" + keys[i] + "-save-box").checked = info[keys[i]][2];
						document.getElementById("ability_stats-" + keys[i] + "-box").value = document.getElementById("ability_stats-" + keys[i] + "-display").innerHTML;
						document.getElementById("ability_stats-" + keys[i] + "-display").style.display = "none";
						document.getElementById("ability_stats-" + keys[i] + "-checkmark").style.display = "none";
						document.getElementById("ability_stats-adjust-" + keys[i] + "-box").disabled = true;
					}
				} else { // Save the data
					for (i = 0; i < keys.length; i++) {
						info[keys[i]][0] = parseInt(document.getElementById("ability_stats-" + keys[i] + "-box").value);
						info[keys[i]][2] = document.getElementById("ability_stats-" + keys[i] + "-save-box").checked;
					}
					update([ "ability_stats", "combat_stats", "weapons" ]);
				}
			});

			elements = document.getElementsByName("combat_stats");
			for (i = 0; i < elements.length; i++) {
				elements[i].addEventListener("click", function() {
					let name = event.target.id.split("-")[1];
					arrow = document.getElementById("combat_stats-" + name + "-arrow");
					adjust = document.getElementById("combat_stats-" + name + "-adjust");
					box = document.getElementById("combat_stats-" + name + "-box");
					display = document.getElementById("combat_stats-" + name + "-display");

					if (arrow.innerHTML === "↑") {
						arrow.innerHTML = "↓";
						adjust.disabled = true;
						box.style.display = "inline";
						box.value = display.innerHTML;
						display.style.display = "none";
					} else {
						CharacterInfo.combat_stats[name][0] = (box.type === "number") ? parseInt(box.value) : box.value;
						update([ "combat_stats" ]);
					}
				});
			}

			elements = document.getElementsByName("ability_stats-adjust");
			for (i = 0; i < elements.length; i++) {
				elements[i].addEventListener("change", function() {
					let base;
					letname = event.target.id.split("-")[2];
					info = CharacterInfo.ability_stats;

					info[name][1] = parseInt(event.target.value);
					base = info[name][0] + info[name][1];
					document.getElementById("ability_stats-" + name + "-display").innerHTML = base;
					document.getElementById("ability_stats-" + name + "-modifier-display").innerHTML = getModifier(base);
					document.getElementById("ability_stats-" + name + "-save-display").innerHTML = (info[name][2]) ? getModifier(base) + getProficiency() : getModifier(base);
					if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
				});
			}

			elements = document.getElementsByName("combat_stats-adjust");
			for (i = 0; i < elements.length; i++) {
				elements[i].addEventListener("change", function() {
					let name = event.target.id.split("-")[1];
					CharacterInfo.combat_stats[name][1] = parseInt(document.getElementById("combat_stats-" + name + "-adjust").value);
					document.getElementById("combat_stats-" + name + "-current").innerHTML = CharacterInfo.combat_stats[name][0] + CharacterInfo.combat_stats[name][1];
					if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
				});
			}

			document.getElementById("combat_stats-armor-adjust").addEventListener("change", function() {
				CharacterInfo.combat_stats.armor_adjustment[1] = parseInt(document.getElementById("combat_stats-armor-adjust").value);
				if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
				update([ "combat_stats" ]);
			});

			elements = document.getElementsByName("combat_stats-notes");
			for (i = 0; i < elements.length; i++) {
				elements[i].addEventListener("click", function() {
					let name = event.target.id.split("-")[1];

					if (document.getElementById("combat_stats-" + name + "-notes-arrow").innerHTML === "→") {
						document.getElementById("combat_stats-" + name + "-notes-arrow").innerHTML = "←";
						document.getElementById("combat_stats-" + name + "-notes-box").style.display = "inline";
						document.getElementById("combat_stats-" + name + "-notes-box").value = document.getElementById("combat_stats-" + name + "-notes-display").innerHTML;
						document.getElementById("combat_stats-" + name + "-notes-display").style.display = "none";
						document.getElementById("combat_stats-" + name + "-notes-box").focus();
						document.getElementById("combat_stats-" + name + "-notes-box").select();
					} else {
						CharacterInfo.combat_stats[name][2] = document.getElementById("combat_stats-" + name + "-notes-box").value;
						update([ "combat_stats" ]);
					}
				});
			}

			document.getElementById("features-button").addEventListener("click", function() {
				if (document.getElementById("features-form").checkValidity()) {
					let button = document.getElementById("features-button");
					feature = { name: "", description: "", quantity: [0, 0], replenish: "" };
					feature.name = document.getElementById("features-name-box").value;
					feature.description = document.getElementById("features-description-box").value;
					feature.quantity[0] = parseInt(document.getElementById("features-quantity-box").value);
					feature.quantity[1] = feature.quantity[0];
					feature.replenish = document.getElementById("features-replenish-box").value

					if (button.value) { CharacterInfo.features[button.value] = JSON.parse(JSON.stringify(feature)); }
					else { CharacterInfo.features.push(feature); }

					update([ "features" ]);
				}
			});

			document.getElementById("proficiencies-arrow").addEventListener("click", function() {
				let keys = Object.keys(CharacterInfo.proficiencies);

				if (document.getElementById("proficiencies-arrow").innerHTML === "↑") {
					document.getElementById("proficiencies-arrow").innerHTML = "↓";
					let table = document.getElementById("proficiencies-table");
					emptyTable("proficiencies-table");
					let box, cells, row;
					keys.sort();

					for(i = 0; i < keys.length; i++) {
						row = table.insertRow(-1);
						cells = [];
						cells.push(row.insertCell(0));
						cells.push(row.insertCell(1));
						cells.push(row.insertCell(2));
						cells.push(row.insertCell(3));

						box = document.createElement("input");
						box.setAttribute("type", "checkbox");
						box.setAttribute("id", "proficiencies-" + keys[i]);
						box.checked = CharacterInfo.proficiencies[keys[i]][1];

						cells[0].appendChild(box);
						cells[1].innerHTML = keys[i].replace(/_/g, " ");
						cells[2].innerHTML = CharacterInfo.proficiencies[keys[i]][0];
					}
				} else {
					for (i = 0; i < keys.length; i++) {
						CharacterInfo.proficiencies[keys[i]][1] = document.getElementById("proficiencies-" + keys[i]).checked;
					}
					update([ "proficiencies" ]);
				}
			});

			document.getElementById("other-proficiencies-arrow").addEventListener("click", function() {
				if (document.getElementById("other-proficiencies-arrow").innerHTML === "↑") {
					document.getElementById("other-proficiencies-arrow").innerHTML = "↓";
					document.getElementById("other-proficiencies-display").style.display = "none";
					document.getElementById("other-proficiencies-box").style.display = "inline";
					document.getElementById("other-proficiencies-box").value = document.getElementById("other-proficiencies-display").innerHTML;
					document.getElementById("other-proficiencies-box").focus();
					document.getElementById("other-proficiencies-box").select();
				} else {
					CharacterInfo.proficiencies.other = document.getElementById("other-proficiencies-box").value;
					update([ "proficiencies" ]);
				}
			});

			document.getElementById("spells-ability-modifier-arrow").addEventListener("click", function() {
				arrow = document.getElementById("spells-ability-modifier-arrow");
				box = document.getElementById("spells-ability-modifier-box");
				display = document.getElementById("spells-ability-modifier-display");

				if (arrow.innerHTML === "↑") {
					arrow.innerHTML = "↓";
					box.style.display = "inline";
					box.focus();
					display.style.display = "none";
				} else {
					CharacterInfo.combat_stats.spellcasting_ability_modifier = box.value;
					update(["spells"]);
				}
			});

			document.getElementById("spells-components-arrow").addEventListener("click", function() {
				arrow = document.getElementById("spells-components-arrow");
				box = document.getElementById("spells-components-box");
				display = document.getElementById("spells-components-display");

				if (arrow.innerHTML === "↑") {
					arrow.innerHTML = "↓";
					box.style.display = "inline";
					box.value = CharacterInfo.combat_stats.spell_components;
					box.focus();
					display.style.display = "none";
				} else {
					CharacterInfo.combat_stats.spell_components = box.value;
					update(["spells"]);
				}
			});

			document.getElementById("spells-button").addEventListener("click", function() {
				if (document.getElementById("spells-form").checkValidity()) {
					let button = event.target;
					let box;
					let spell = { name: "", type: "", level: "", school: "", ritual_tag: false, casting_time: "", range: "", verbal: false, somatic: false, materials: "", duration: "", description: "" };

					for (let key in spell) {
						box = document.getElementById("spells-" + key + "-box");

						if (box.type === "number") { spell[key] = parseInt(box.value); }
						else if (box.type === "checkbox") { spell[key] = box.checked; }
						else { spell[key] = box.value; }
					}
					spell.active = false;
					spell.quantity = 1;

					if (button.value) { CharacterInfo.spells[button.value] = JSON.parse(JSON.stringify(spell)); }
					else { CharacterInfo.spells.push(spell); }

					update([ "spells" ]);
				}
			});

			document.getElementById("inventory-button").addEventListener("click", function() {
				if (document.getElementById("inventory-form").checkValidity()) {
					let button = event.target;
					let box;
					let newItem = { name: "", type: "", sub_type: "", description: "", weight: 0, cost: "", quantity: 1, style_armor: "", armor_class: 0, add_dex_mod: false, max_dex_bonus: 0, stealth_disadv: false, active: false, style_weapon: "", proficient: false, damage: "", min: 0, max: 0, properties: "" };

					for (let key in newItem) {
						box = document.getElementById("inventory-" + key + "-box");

						if (box.type === "number") { newItem[key] = parseInt(box.value); }
						else if (box.type === "checkbox") { newItem[key] = box.checked; }
						else { newItem[key] = box.value; }
					}

					if (button.value) { CharacterInfo.inventory[button.value] = JSON.parse(JSON.stringify(newItem)); }
					else { CharacterInfo.inventory.push(newItem); }

					update([ "combat_stats", "weapons", "inventory" ]);
				}
			});

			document.getElementById("inventory-add_dex_mod-box").addEventListener("change", function() {
				document.getElementById("inventory-max_dex_bonus-box").disabled = (!document.getElementById("inventory-add_dex_mod-box").checked) ? true : false;
			});

			document.getElementById("gold-arrow").addEventListener("click", function() {
				if (document.getElementById("gold-arrow").innerHTML === "↑") {
					document.getElementById("gold-arrow").innerHTML = "↓";
					document.getElementById("gold-box").style.display = "inline";
					document.getElementById("gold-box").value = document.getElementById("gold-display").innerHTML;
					document.getElementById("gold-box").focus();
					document.getElementById("gold-box").select();
					document.getElementById("gold-display").style.display = "none";
				} else {
					CharacterInfo.gold = document.getElementById("gold-box").value;
					update([ "gold" ]);
				}
			});

			document.getElementById("log-button").addEventListener("click", function() {
				let d = new Date(); // Create a date and time object

				// Format the date and time object into a desired look
				let hours = (d.getHours() > 12) ? d.getHours() - 12 : d.getHours();
				let timeOfDay = (d.getHours() > 12) ? "pm" : "am";
				let minutes = (d.getMinutes() < 10) ? "0" + d.getMinutes() : d.getMinutes();
				let dateFormat = hours + ":" + minutes + " " + timeOfDay + " " + (d.getMonth() + 1) + "/" + d.getDate() + "/" + d.getFullYear();

				CharacterInfo.log.push(dateFormat + ": " + document.getElementById("log-box").value); // Create the log entry
				update([ "log" ]);
			});

			document.getElementById("log-clear").addEventListener("click", function() {
				if (confirm("Are you absolutely sure you want to erase the log?")) {
					CharacterInfo.log.length = 0;
					update([ "log" ]);
				}
			});

			document.getElementById("log-export").addEventListener("click", function() {
				let text = "";
				for (i in CharacterInfo.log) {
					text += CharacterInfo.log[i] + "\n";
				}
				copyToClipboard(text);
			});

			function update(what) {
				if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }

				let keys, text;
				let alpha, arrow, adjustBox, box, cells, delta, display, header, info, item, label, name, row, table, unorderedList;
				let dexMod = getModifier(CharacterInfo["ability_stats"]["dexterity"][0] + CharacterInfo["ability_stats"]["dexterity"][1]);
				let strMod = getModifier(CharacterInfo["ability_stats"]["strength"][0] + CharacterInfo["ability_stats"]["strength"][1]);
				let wisMod = getModifier(CharacterInfo["ability_stats"]["wisdom"][0] + CharacterInfo["ability_stats"]["wisdom"][1]);

				for (i in what) {
					if (what[i] === "basic") {
						keys = Object.keys(CharacterInfo.basic);

						for (ii = 0; ii < keys.length; ii++) {
							info = CharacterInfo.basic[keys[ii]];
							type = typeof info;
							display = document.getElementById("basic-" + keys[ii] + "-display");

							document.getElementById("basic-" + keys[ii] + "-arrow").innerHTML = "↑";
							document.getElementById("basic-" + keys[ii] + "-box").style.display = "none";
							display.innerHTML = "";

							if (type === "object") {
								unorderedList = document.createElement("ul"); // Create an unordered list
								unorderedList.style.listStyle = "none";

								// Cycle through all the object entries
								for (iii in info) {
									// Create the delete button for the entry
									delta = document.createElement("button");
									delta.setAttribute("class", "edit-button");
									delta.setAttribute("value", iii);
									delta.setAttribute("id", keys[ii]);
									delta.appendChild(document.createTextNode("δ"));
									delta.addEventListener("click", function() {
										CharacterInfo.basic[event.target.getAttribute("id")].splice(event.target.getAttribute("value"), 1);
										update([ "basic" ]);
									});

									// Create the new item to be appended to the unordered list
									item = document.createElement("li");
									item.appendChild(delta);
									item.appendChild(document.createTextNode(info[iii]));
									unorderedList.appendChild(item);
								}

								display.appendChild(unorderedList); // Finally, display the list
							} else {
								display.innerHTML = info;
							}
							display.style.display = "initial";
						}

						document.title = (CharacterInfo.basic.name) ? CharacterInfo.basic.name + " - Auto Character Sheet" : document.title;
					} else if (what[i] === "schema") {
						box = document.getElementById("schema-box");
						let option;
						let len = box.options.length;
						info = CharacterInfo["discreet_schemas"];

						for (ii in len) {
							box.remove(0);
						}

						// Create a dummy option
						option = document.createElement("option");
						option.appendChild(document.createTextNode("Select"));
						option.setAttribute("value", "");
						box.appendChild(option);

						// Fill out the select box with the options on file
						for (ii in info) {
							option = document.createElement("option");
							text = info[ii]["name"];
							text = (info[ii]["classes"]) ? text + " (" + info[ii]["classes"] + ")" : text;
							option.appendChild(document.createTextNode(text));
							option.setAttribute("value", ii);
							box.appendChild(option);
						}

						// Create the create new option
						option = document.createElement("option");
						option.appendChild(document.createTextNode("new"));
						option.setAttribute("value", "new_schema");
						box.appendChild(option);

						// Reset everything
						document.getElementById("schema-display").innerHTML = "";
						box.value = "";
						document.getElementById("new_schema-form").reset();
						document.getElementById("new_schema-form").style.display = "none";
						document.getElementById("schema-button").disabled = true;
					} else if (what[i] === "ability_stats") {
					info = CharacterInfo.ability_stats;
						keys = Object.keys(info);

						for (ii = 0; ii < keys.length; ii++) {
							let stat = info[keys[ii]][0] + info[keys[ii]][1]; // The base score for the ability
							let mod = getModifier(stat); // The modifier for the ability score
							let checkmark = document.getElementById("ability_stats-" + keys[ii] + "-checkmark"); // Indicates a save proficiency
							let saveBox = document.getElementById("ability_stats-" + keys[ii] + "-save-box"); // When active, this checkbox determines if this is a proficient ability
							let saveDisplay = document.getElementById("ability_stats-" + keys[ii] + "-save-display"); // Displays the total save score
							let modDisplay = document.getElementById("ability_stats-" + keys[ii] + "-modifier-display"); // Displays the modifier
							adjustBox = document.getElementById("ability_stats-adjust-" + keys[ii] + "-box"); // A box that adjusts the total ability score and all other subsidiary scores
							box = document.getElementById("ability_stats-" + keys[ii] + "-box"); // The checkbox for indicating this save is a proficiency
							display = document.getElementById("ability_stats-" + keys[ii] + "-display");

							saveBox.style.display = "none";
							box.style.display = "none";
							adjustBox.disabled = false;
							display.innerHTML = stat;
							display.style.display = "inline";
							modDisplay.innerHTML = mod;
							if (info[keys[ii]][2]) {
								checkmark.style.display = "inline";
								saveDisplay.innerHTML = mod + getProficiency();
							} else {
								saveDisplay.innerHTML = mod;
							}
							adjustBox.value = info[keys[ii]][1];
						}
						document.getElementById("ability_stats-arrow").innerHTML = "↑";
					} else if (what[i] === "combat_stats") {
						let ac = 0;
						text = "";

		// Display initiative bonus
						document.getElementById("combat_stats-initiative-display").innerHTML = getModifier(CharacterInfo["ability_stats"]["dexterity"][0] + CharacterInfo["ability_stats"]["dexterity"][1]);

						// Display hit points
						document.getElementById("combat_stats-hit_points-arrow").innerHTML = "↑";
						document.getElementById("combat_stats-hit_points-display").innerHTML = CharacterInfo["combat_stats"]["hit_points"][0];
						document.getElementById("combat_stats-hit_points-adjust").value = CharacterInfo["combat_stats"]["hit_points"][1];
						document.getElementById("combat_stats-hit_points-current").innerHTML = CharacterInfo["combat_stats"]["hit_points"][0] + CharacterInfo["combat_stats"]["hit_points"][1];
						document.getElementById("combat_stats-hit_points-adjust").disabled = false;
						document.getElementById("combat_stats-hit_points-box").style.display = "none";
						document.getElementById("combat_stats-hit_points-display").style.display = "inline";
						document.getElementById("combat_stats-hit_points-notes-arrow").innerHTML = "→";
						document.getElementById("combat_stats-hit_points-notes-display").innerHTML = CharacterInfo["combat_stats"]["hit_points"][2];
						document.getElementById("combat_stats-hit_points-notes-display").style.display = "inline";
						document.getElementById("combat_stats-hit_points-notes-box").style.display = "none";

						// Display hit dice
						document.getElementById("combat_stats-hit_dice-arrow").innerHTML = "↑";
						document.getElementById("combat_stats-hit_dice-adjust").disabled = false;
						document.getElementById("combat_stats-hit_dice-display").innerHTML = CharacterInfo.combat_stats.hit_dice[0];
						document.getElementById("combat_stats-hit_dice-adjust").value = CharacterInfo.combat_stats.hit_dice[1];
						document.getElementById("combat_stats-hit_dice-box").style.display = "none";
						document.getElementById("combat_stats-hit_dice-display").style.display = "inline";

						// Display armor
						for (ii in CharacterInfo["inventory"]) if (CharacterInfo["inventory"][ii]["type"] === "armor" && CharacterInfo["inventory"][ii]["active"]) {
							ac = CharacterInfo["inventory"][ii]["armor_class"];
							if (CharacterInfo["inventory"][ii]["add_dex_mod"]) {
								ac = (CharacterInfo["inventory"][ii]["max_dex_bonus"] > 0 && dexMod < CharacterInfo["inventory"][ii]["max_dex_bonus"]) ? ac + dexMod : ac + CharacterInfo["inventory"][ii]["max_dex_bonus"];
							} else {
								ac += dexMod;
							}
							text = (text) ? text + ", " : text;
							text += CharacterInfo["inventory"][ii]["name"];
							text = (CharacterInfo["inventory"][ii]["stealth_disadv"]) ? text + " (Imposes stealth disadvantage)" : text;
						}
						if (ac < 10) {
							ac += CharacterInfo.combat_stats.armor_adjustment[0] + dexMod;
							text = (text) ? "Unarmored, " + text : "Unarmored";
						}
						document.getElementById("combat_stats-armor-adjust").value = CharacterInfo.combat_stats.armor_adjustment[1];
						ac += CharacterInfo.combat_stats.armor_adjustment[1];
						document.getElementById("combat_stats-armor_class-display").innerHTML = ac + " " + text;
						document.getElementById("combat_stats-armor_adjustment-notes-arrow").innerHTML = "→";
						document.getElementById("combat_stats-armor_adjustment-notes-display").innerHTML = CharacterInfo.combat_stats.armor_adjustment[2];
						document.getElementById("combat_stats-armor_adjustment-notes-display").style.display = "inline";
						document.getElementById("combat_stats-armor_adjustment-notes-box").style.display = "none";

						// Display speed
						document.getElementById("combat_stats-speed-arrow").innerHTML = "↑";
						document.getElementById("combat_stats-speed-display").innerHTML = CharacterInfo["combat_stats"]["speed"][0];
						document.getElementById("combat_stats-speed-adjust").value = CharacterInfo["combat_stats"]["speed"][1];
						document.getElementById("combat_stats-speed-current").innerHTML = CharacterInfo["combat_stats"]["speed"][0] + CharacterInfo["combat_stats"]["speed"][1];
						document.getElementById("combat_stats-speed-adjust").disabled = false;
						document.getElementById("combat_stats-speed-box").style.display = "none";
						document.getElementById("combat_stats-speed-display").style.display = "inline";
						document.getElementById("combat_stats-speed-notes-arrow").innerHTML = "→";
						document.getElementById("combat_stats-speed-notes-display").innerHTML = CharacterInfo["combat_stats"]["speed"][2];
						document.getElementById("combat_stats-speed-notes-display").style.display = "inline";
						document.getElementById("combat_stats-speed-notes-box").style.display = "none";

						// Display passive perception
						document.getElementById("combat_stats-passive_perception-display").innerHTML = (CharacterInfo["proficiencies"]["perception"][1]) ? 10 + wisMod + getProficiency() : 10 + wisMod;
					} else if (what[i] === "weapons") {
						let hitMod = 0;
						let range;
						table = document.getElementById("weapons-table");
						emptyTable("weapons-table"); // Insure the table is empty (otherwise they will multiply everytime a stat is updated).
						info = CharacterInfo.inventory;

						for (ii in info) if (info[ii].type === "weapon") {
							// Some of the data needs to be calculated or otherwise tabulated
							hitMod = (info[ii]["sub_type"] === "melee") ? strMod : dexMod;
							hitMod = (info[ii]["proficient"]) ? hitMod + getProficiency() : hitMod;

							range = (info[ii]["min"]) ? "(" + info[ii]["min"] : "";
							range = (range && info[ii]["max"]) ? range + "/" + info[ii]["max"] : range;
							range = (range) ? range + ")" : range;

							// Now that all the information has been calculated and tabulated, insert it into the table.
							cells = []; // Empty the cells list
							row = table.insertRow(-1); // Insert a row at the bottom of the table

							// Insert the cells into the row
							cells.push(row.insertCell(0));
							cells.push(row.insertCell(1));
							cells.push(row.insertCell(2));
							cells.push(row.insertCell(3));
							cells.push(row.insertCell(4));

							// Fill out the cells with the information
							cells[0].innerHTML = info[ii]["name"];
							cells[1].innerHTML = hitMod;
							cells[2].innerHTML = info[ii]["damage"];
							cells[3].innerHTML = range || "–";
							cells[4].innerHTML = info[ii]["properties"] || "–";
						}
					} else if (what[i] === "features") {
						display = document.getElementById("features-display");
						display.innerHTML = "";
						let quantityLine;
						info = CharacterInfo["features"];

						for (ii in info) {
							// Fill out the information for each character feature.
							name = info[ii]["name"];

							arrow = document.createElement("button");
							arrow.appendChild(document.createTextNode("↑"));
							arrow.setAttribute("class", "edit-button");
							arrow.setAttribute("value", ii);
							arrow.addEventListener("click", function() {
							event.target.innerHTML = "↓";
								document.getElementById("features-form").reset();
								document.getElementById("features-name-box").value = CharacterInfo.features[event.target.value]["name"];
								document.getElementById("features-description-box").value = CharacterInfo.features[event.target.value]["description"];
								document.getElementById("features-quantity-box").value = CharacterInfo.features[event.target.value]["quantity"][0];
								document.getElementById("features-replenish-box").value = CharacterInfo.features[event.target.value]["replenish"];
								document.getElementById("features-button").value = event.target.value;
								document.getElementById("features-name-box").focus();
								document.getElementById("features-name-box").select();
							});

							delta = document.createElement("button");
							delta.appendChild(document.createTextNode("δ"));
							delta.setAttribute("class", "edit-button");
							delta.setAttribute("value", ii);
							delta.addEventListener("click", function() {
								CharacterInfo.features.splice(event.target.getAttribute("value"), 1);
								update([ "features" ]);
							});

							header = document.createElement("h2");
							header.style.textTransform = "capitalize";
							header.appendChild(arrow);
							header.appendChild(delta);
							header.appendChild(document.createTextNode(name));
							display.appendChild(header);

							if (info[ii].quantity[0]) {
								quantityLine = document.createElement("p");
								quantityLine.appendChild(document.createTextNode("Total of " + info[ii].quantity[0] + " before a " + info[ii].replenish + " rest. "));

								label = document.createElement("label");
								label.setAttribute("for", "features-" + ii);
								label.appendChild(document.createTextNode("Uses remaining:"));

								box = document.createElement("input");
								box.setAttribute("id", "features-" + ii);
								box.setAttribute("value", info[ii].quantity[1]);
								box.addEventListener("change", function() {
									CharacterInfo.features[event.target.id.split("-")[1]].quantity = parseInt(event.target.value);
									// if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
								});

								label.appendChild(box);
								quantityLine.appendChild(label);
								display.appendChild(quantityLine);
							}

							display.appendChild(document.createElement("p").appendChild(document.createTextNode(info[ii].description)));
							display.appendChild(document.createElement("br"));
							display.appendChild(document.createElement("br"));
						}

						document.getElementById("features-button").value = "";
						document.getElementById("features-form").reset();
					} else if (what[i] === "proficiencies") {
						table = document.getElementById("proficiencies-table");
						emptyTable("proficiencies-table");
						let list1 = [];
						let list2 = [];

						// Separate the proficiencies into two lists. The first is the skills for which you are proficient, the second are skills for which you only get your ability modifier.
						keys = Object.keys(CharacterInfo["proficiencies"]);
						for (ii = 0; ii < keys.length; ii++) {
							if (typeof CharacterInfo.proficiencies[keys[ii]] === "object") {
								if (CharacterInfo.proficiencies[keys[ii]][1]) { list1.push(keys[ii]); }
								else { list2.push(keys[ii]); }
							}
						}
						// Sort the proficiencies alphabetically
						list1.sort();
						list2.sort();

						// The first list, skills for which you are proficient, go at the top of the table
						for (ii in list1) {
							row = table.insertRow(-1);
							cells = [];
							cells.push(row.insertCell(0));
							cells.push(row.insertCell(1));
							cells.push(row.insertCell(2));
							cells.push(row.insertCell(3));

							cells[0].innerHTML = "✓";
							cells[1].innerHTML = list1[ii].replace(/_/g, " ");
							cells[2].innerHTML = CharacterInfo["proficiencies"][list1[ii]][0];
							cells[3].innerHTML = getModifier(CharacterInfo["ability_stats"][CharacterInfo["proficiencies"][list1[ii]][0]][0] + CharacterInfo["ability_stats"][CharacterInfo["proficiencies"][list1[ii]][0]][1]) + getProficiency();
						}

						// Insert all other proficiencies
						for (ii in list2) {
							row = table.insertRow(-1);
							cells = [];
							cells.push(row.insertCell(0));
							cells.push(row.insertCell(1));
							cells.push(row.insertCell(2));
							cells.push(row.insertCell(3));

							cells[1].innerHTML = list2[ii].replace(/_/g, " ");
							cells[2].innerHTML = CharacterInfo["proficiencies"][list2[ii]][0];
							cells[3].innerHTML = getModifier(CharacterInfo["ability_stats"][CharacterInfo["proficiencies"][list2[ii]][0]][0] + CharacterInfo["ability_stats"][CharacterInfo["proficiencies"][list2[ii]][0]][1]);
						}

						document.getElementById("proficiencies-arrow").innerHTML = "↑";
						document.getElementById("other-proficiencies-arrow").innerHTML = "↑"
						document.getElementById("other-proficiencies-display").style.display = "inline";
						document.getElementById("other-proficiencies-display").innerHTML = CharacterInfo.proficiencies.other;
						document.getElementById("other-proficiencies-box").style.display = "none";
					} else if (what[i] === "spells") {
						let active = { "cantrip": [], "1st": [], "2nd": [], "3rd": [], "4th": [], "5th": [], "6th": [], "7th": [], "8th": [], "9th": [] };
						info = CharacterInfo.spells;

						document.getElementById("spells-active-display").innerHTML = "";
						document.getElementById("spells-known-display").innerHTML = "";
						document.getElementById("invocations-display").innerHTML = "";

						for (ii in info) {
							name = info[ii].name; // For convenience

							// Create a button to edit the spell
							arrow = document.createElement("button");
							arrow.setAttribute("class", "edit-button");
							arrow.setAttribute("value", "0");
							arrow.appendChild(document.createTextNode("↑"));
							arrow.addEventListener("click", function() {
								event.target.innerHTML = "↓";
								keys = [ "name", "type", "level", "school", "ritual_tag", "casting_time", "range", "verbal", "somatic", "materials", "duration", "description" ];
								for (iii = 0; iii < keys.length; iii++) {
									if (typeof CharacterInfo.spells[event.target.value][keys[iii]] === "boolean") {
										document.getElementById("spells-" + keys[iii] + "-box").checked = CharacterInfo.spells[event.target.value][keys[iii]];
									} else {
										document.getElementById("spells-" + keys[iii] + "-box").value = CharacterInfo.spells[event.target.value][keys[iii]];
									}
								}
								document.getElementById("spells-button").value = event.target.value;
								document.getElementById("spells-name-box").focus();
								document.getElementById("spells-name-box").select();
							});

								// Create a button to activate the spell
							alpha = document.createElement("button");
							alpha.setAttribute("class", "edit-button");
							alpha.setAttribute("value", ii);
							alpha.appendChild(document.createTextNode("α"));
							alpha.addEventListener("click", function() {
								CharacterInfo.spells[event.target.value].active = true;
								update([ "spells", ]);
							});

							// Create a button to delete the spell
							delta = document.createElement("button");
							delta.setAttribute("class", "edit-button");
							delta.setAttribute("value", ii);
							delta.appendChild(document.createTextNode("δ"));
							delta.addEventListener("click", function() {
								CharacterInfo.spells.splice(event.target.value, 1);
								update([ "spells" ]);
							});

							// Create an input box to change the quantity of spells left to use
							label = document.createElement("label");
							label.setAttribute("for", "spells-" + ii + "-quantity");
							label.appendChild(document.createTextNode(" × "));

							box = document.createElement("input");
							box.setAttribute("id", "spells-" + ii + "-quantity");
							box.setAttribute("type", "number");
							box.setAttribute("min", "1");
							box.setAttribute("value", info[ii].quantity);
							box.addEventListener("change", function() {
								CharacterInfo.spells[event.target.id.split("-")[1]].quantity = parseInt(event.target.value);
								 if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
							});
							label.appendChild(box);

							if (info[ii].type === "spell") {
								// Construct the active spells list
								if (info[ii].active) {
									item = document.createElement("li");

									//item.appendChild(alpha);
									item.appendChild(document.createTextNode(name));
									//item.appendChild(label);

									active[info[ii].level].push(item);
								}

								// Add the spell to the spells list
								// Create the spell's heading
								header = document.createElement("h2");
								header.style.textTransform = "capitalize";
								header.appendChild(arrow);
								header.appendChild(delta);
								header.appendChild(alpha);
								header.appendChild(document.createTextNode(name));

								// Create the spell's properties list
								unorderedList = document.createElement("ul");
								unorderedList.style.listStyle = "none";

								item = document.createElement("li"); // Level
								if (info[ii].level === "cantrip") { item.appendChild(document.createTextNode(info[ii].school + " cantrip")); }
								else { item.appendChild(document.createTextNode(info[ii].level + "-level " + info[ii].school)); }
								if (info[ii].ritual_tag) { item.appendChild(document.createTextNode(" (ritual)")); }
								unorderedList.appendChild(item);

								item = document.createElement("li"); // Casting time
								item.appendChild(document.createTextNode("Casting Time: " + info[ii].casting_time));
								unorderedList.appendChild(item);

								item = document.createElement("li"); // range
								item.appendChild(document.createTextNode("Range: " + info[ii].range));
								unorderedList.appendChild(item);

								item = document.createElement("li"); // components
								item.appendChild(document.createTextNode("Components: "));
								if (info[ii].verbal) {
									item.appendChild(document.createTextNode("V"));
									if (info[ii].somatic || info[ii].materials) { item.appendChild(document.createTextNode(", ")); }
								}
								if (info[ii].somatic) {
									item.appendChild(document.createTextNode("S"));
									if (info[ii].materials) { item.appendChild(document.createTextNode(", ")); }
								}
								if (info[ii].materials) { item.appendChild(document.createTextNode("(" + info[ii].materials + ")")); }
								unorderedList.appendChild(item);

								item = document.createElement("li"); // Duration
								item.appendChild(document.createTextNode("Duration: " + info[ii].duration));
								unorderedList.appendChild(item);

								// Put it all together
								display = document.getElementById("spells-known-display");
								display.appendChild(header);
								display.appendChild(unorderedList);
								display.appendChild(document.createElement("p").appendChild(document.createTextNode(info[ii].description)));
								display.appendChild(document.createElement("br"));
								display.appendChild(document.createElement("br"));
							} else if (info[ii].type === "invocation") {
								// Create the invocation heading
								display = document.getElementById("invocations-display");
								header = document.createElement("h2");
								header.style.textTransform = "capitalize";
								header.appendChild(arrow);
								header.appendChild(delta);
								header.appendChild(document.createTextNode(name));

								// Put it all together
								display.appendChild(header);
								display.appendChild(document.createElement("p").appendChild(document.createTextNode(info[ii].description)));
								display.appendChild(document.createElement("br"));
								display.appendChild(document.createElement("br"));
							}
						}

						// Display the active spells
						// If there are any active spells to display
						display = document.getElementById("spells-active-display");
						keys = Object.keys(active);

						// For each level of spell
						for (ii in keys) {
							if (active[keys[ii]].length) {
								unorderedList = document.createElement("ul");
								header = document.createElement("h2");
								if (keys[ii] === "cantrip") { header.appendChild(document.createTextNode("Cantrips (0-level)")); }
								else { header.appendChild(document.createTextNode(keys[ii] + "-level")); }
								for (iii in active[keys[ii]]) {
									unorderedList.appendChild(active[keys[ii]][iii]);
								}
								display.appendChild(document.createElement("br"));
								display.appendChild(header);
								display.appendChild(unorderedList);
							}
						}

						if (display.innerHTML) {
							header = document.createElement("h1");
							header.appendChild(document.createTextNode("Active Spells"));

							display.prepend(header);
							display.appendChild(document.createElement("br"));
						}

						// Display the spells known
						if (document.getElementById("spells-known-display").innerHTML) {
								header = document.createElement("h1");
								header.appendChild(document.createTextNode("Spells Known"));
								document.getElementById("spells-known-display").prepend(document.createElement("br"));
								document.getElementById("spells-known-display").prepend(header);
						}

						// Display the invocations
						if (document.getElementById("invocations-display").innerHTML) {
								header = document.createElement("h1");
								header.appendChild(document.createTextNode("Invocations"));
								document.getElementById("invocations-display").prepend(document.createElement("br"));
								document.getElementById("invocations-display").prepend(header);
						}

						// Reset the form
						document.getElementById("spells-button").value = "";
						document.getElementById("spells-form").reset();

						// Set the spell ability information
						abilityModifier = CharacterInfo.combat_stats.spellcasting_ability_modifier;
						// Set modifier menu selection
						let options = document.getElementById("spells-ability-modifier-box").options;
						for (var opt, ii = 0; opt = options[ii]; ii++) {
							if (opt.value === abilityModifier) {
								document.getElementById("spells-ability-modifier-box").selectedIndex = ii;
								break;
							}
						}
						// Set modifier display
						document.getElementById("spells-ability-modifier-display").innerHTML = abilityModifier;
						// Calculate and display save DC
						saveDC = 8 + parseInt(getProficiency()) + getModifier(CharacterInfo.ability_stats[abilityModifier][0]);
						document.getElementById("spells-save-dc-display").innerHTML = saveDC;
						// Calculate and display attack modifier
						attackMod = parseInt(getProficiency()) + getModifier(CharacterInfo.ability_stats[abilityModifier][0]);
						document.getElementById("spells-attack-modifier-display").innerHTML = attackMod;
						// Set elements to default
						document.getElementById("spells-ability-modifier-arrow").innerHTML = "↑";
						document.getElementById("spells-ability-modifier-box").style.display = "none";
						document.getElementById("spells-ability-modifier-display").style.display = "inline";
						document.getElementById("spells-components-arrow").innerHTML = "↑";
						document.getElementById("spells-components-box").style.display = "none";
						document.getElementById("spells-components-display").style.display = "inline";
						document.getElementById("spells-components-display").innerHTML = CharacterInfo.combat_stats.spell_components;
					} else if (what[i] === "inventory") {
						table = document.getElementById("inventory-table");
						emptyTable("inventory-table") // Insure the table is empty (otherwise they will multiply everytime a stat is updated).
						let armor = [];
						let weapons = [];
						let other = [];
						let totalWeight = 0;
						info = CharacterInfo["inventory"];

						for (ii in info) {
							totalWeight += info[ii]["weight"] * info[ii]["quantity"];
							if (info[ii]["type"] === "armor") { armor.push(ii); }
							else if (info[ii]["type"] === "weapon") { weapons.push(ii); }
							else { other.push(ii); }
						}

						// Populate the inventory table.

						// Armor
						row = table.insertRow(-1);
						cells = [];
						cells.push(row.insertCell(0));
						cells.push(row.insertCell(1));

						cells[0].innerHTML = "armor";
						unorderedList = document.createElement("ul");
						unorderedList.style.listStyle = "none";

						for (ii in armor) {
							item = document.createElement("li");
							arrow = document.createElement("button");
							arrow.setAttribute("class", "edit-button");
							arrow.setAttribute("value", armor[ii]);
							arrow.appendChild(document.createTextNode("↑"));
							arrow.addEventListener("click", function() {
								event.target.innerHTML = "↓";
								keys = Object.keys(CharacterInfo.inventory[event.target.value]);
								for (iii = 0; iii < keys.length; iii++) {
									if (typeof CharacterInfo.inventory[event.target.value][keys[iii]] === "boolean") {
										document.getElementById("inventory-" + keys[iii] + "-box").checked = CharacterInfo.inventory[event.target.value][keys[iii]];
									} else {
										document.getElementById("inventory-" + keys[iii] + "-box").value = CharacterInfo.inventory[event.target.value][keys[iii]];
									}
								}
								document.getElementById("inventory-button").value = event.target.value;
								document.getElementById("inventory-name-box").focus();
								document.getElementById("inventory-name-box").select();
							});

							delta = document.createElement("button");
							delta.setAttribute("class", "edit-button");
							delta.setAttribute("value", armor[ii]);
							delta.appendChild(document.createTextNode("δ"));
							delta.addEventListener("click", function() {
								CharacterInfo.inventory.splice(event.target.value, 1);
								update([ "combat_stats", "inventory" ]);
							});

							alpha = document.createElement("button");
							alpha.setAttribute("class", "edit-button");
							alpha.setAttribute("value", armor[ii]);
							alpha.appendChild(document.createTextNode("α"));
							alpha.addEventListener("click", function() {
								CharacterInfo.inventory[event.target.value].active = (CharacterInfo.inventory[event.target.value].active) ? false : true;
								update([ "combat_stats", "inventory" ]);
							});

							label = document.createElement("label");
							label.setAttribute("for", "armor-" + armor[ii]);
							label.appendChild(document.createTextNode(" × "));

							box = document.createElement("input");
							box.setAttribute("id", "armor-" + armor[ii]);
							box.setAttribute("type", "number");
							box.setAttribute("min", "1");
							box.setAttribute("value", info[armor[ii]].quantity);
							box.addEventListener("change", function() {
								CharacterInfo.inventory[event.target.id.split("-")[1]].quantity = parseInt(event.target.value);
								// if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
							});

							label.appendChild(box);
							if (info[armor[ii]].active) {
								item.appendChild(document.createTextNode("✓"));
							}
							item.appendChild(arrow);
							item.appendChild(delta);
							item.appendChild(alpha);
							item.appendChild(document.createTextNode(info[armor[ii]].name));
							item.appendChild(label);
							unorderedList.appendChild(item);
						}
						cells[1].appendChild(unorderedList);

						// Weapons
						row = table.insertRow(-1);
						cells = [];
						cells.push(row.insertCell(0));
						cells.push(row.insertCell(1));

						cells[0].innerHTML = "weapons";
						unorderedList = document.createElement("ul");
						unorderedList.style.listStyle = "none";

						for (ii in weapons) {
							item = document.createElement("li");

							arrow = document.createElement("button");
							arrow.setAttribute("class", "edit-button");
							arrow.setAttribute("value", weapons[ii]);
							arrow.appendChild(document.createTextNode("↑"));
							arrow.addEventListener("click", function() {
								event.target.innerHTML = "↓";
								keys = Object.keys(CharacterInfo.inventory[event.target.value]);
								for (iii = 0; iii < keys.length; iii++) {
									if (typeof CharacterInfo.inventory[event.target.value][keys[iii]] === "boolean") {
										document.getElementById("inventory-" + keys[iii] + "-box").checked = CharacterInfo.inventory[event.target.value][keys[iii]];
									} else {
										document.getElementById("inventory-" + keys[iii] + "-box").value = CharacterInfo.inventory[event.target.value][keys[iii]];
									}
								}
								document.getElementById("inventory-button").value = event.target.value;
								document.getElementById("inventory-name-box").focus();
								document.getElementById("inventory-name-box").select();
							});

							delta = document.createElement("button");
							delta.setAttribute("class", "edit-button");
							delta.setAttribute("value", weapons[ii]);
							delta.appendChild(document.createTextNode("δ"));
							delta.addEventListener("click", function() {
								CharacterInfo.inventory.splice(event.target.value, 1);
								update([ "weapons", "inventory" ]);
							});

							label = document.createElement("label");
							label.setAttribute("for", "weapons-" + weapons[ii]);
							label.appendChild(document.createTextNode(" × "));

							box = document.createElement("input");
							box.setAttribute("id", "weapons-" + weapons[ii]);
							box.setAttribute("type", "number");
							box.setAttribute("min", "1");
							box.setAttribute("value", info[weapons[ii]].quantity);
							box.addEventListener("change", function() {
								CharacterInfo.inventory[event.target.id.split("-")[1]].quantity = parseInt(event.target.value);
								if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
							});

							label.appendChild(box);
							item.appendChild(arrow);
							item.appendChild(delta);
							item.appendChild(document.createTextNode(info[weapons[ii]].name));
							item.appendChild(label);
							unorderedList.appendChild(item);
						}
						cells[1].appendChild(unorderedList);

						// Everything else
						row = table.insertRow(-1);
						cells = [];
						cells.push(row.insertCell(0));
						cells.push(row.insertCell(1));

						cells[0].innerHTML = "other";
						unorderedList = document.createElement("ul");
						unorderedList.style.listStyle = "none";

						for (ii in other) {
							item = document.createElement("li");

							arrow = document.createElement("button");
							arrow.setAttribute("class", "edit-button");
							arrow.setAttribute("value", other[ii]);
							arrow.appendChild(document.createTextNode("↑"));
							arrow.addEventListener("click", function() {
								event.target.innerHTML = "↓";
								keys = Object.keys(CharacterInfo.inventory[event.target.value]);
								for (iii = 0; iii < keys.length; iii++) {
									if (typeof CharacterInfo.inventory[event.target.value][keys[iii]] === "boolean") {
										document.getElementById("inventory-" + keys[iii] + "-box").checked = CharacterInfo.inventory[event.target.value][keys[iii]];
									} else {
										document.getElementById("inventory-" + keys[iii] + "-box").value = CharacterInfo.inventory[event.target.value][keys[iii]];
									}
								}
								document.getElementById("inventory-button").value = event.target.value;
								document.getElementById("inventory-name-box").focus();
								document.getElementById("inventory-name-box").select();
							});

							delta = document.createElement("button");
							delta.setAttribute("class", "edit-button");
							delta.setAttribute("value", other[ii]);
							delta.appendChild(document.createTextNode("δ"));
							delta.addEventListener("click", function() {
								CharacterInfo.inventory.splice(event.target.value, 1);
								update([ "inventory" ]);
							});

							label = document.createElement("label");
							label.setAttribute("for", "other-" + other[ii]);
							label.appendChild(document.createTextNode(" × "));

							box = document.createElement("input");
							box.setAttribute("id", "other-" + other[ii]);
							box.setAttribute("type", "number");
							box.setAttribute("min", "1");
							box.setAttribute("value", info[other[ii]].quantity);
							box.addEventListener("change", function() {
								CharacterInfo.inventory[event.target.id.split("-")[1]].quantity = parseInt(event.target.value);
								if (storageName !== "auto-character-sheet") { localStorage.setItem("CharacterInfo" + storageName, JSON.stringify(CharacterInfo)); }
							});

							label.appendChild(box);
							item.appendChild(arrow);
							item.appendChild(delta);
							item.appendChild(document.createTextNode(info[other[ii]].name));
							item.appendChild(label);
							unorderedList.appendChild(item);
						}
						cells[1].appendChild(unorderedList);

						// Display the total weight of the inventory
						document.getElementById("inventory-weight-display").innerHTML = totalWeight;

						// Clear the inventory form
						document.getElementById("inventory-button").value = "";
						document.getElementById("inventory-form").reset();
					} else if (what[i] === "gold") {
						document.getElementById("gold-arrow").innerHTML = "↑";
						document.getElementById("gold-display").innerHTML = CharacterInfo.gold;
						document.getElementById("gold-box").style.display = "none";
						document.getElementById("gold-display").style.display = "inline";
					} else if (what[i] === "combat_schemas") {
						display = document.getElementById("combat-schemas-display");
						display.innerHTML = "";
						info = CharacterInfo.discreet_schemas;

						for (ii in info) if (info[ii].active && info[ii].display_in_section === "combat") {
							display.appendChild(formatSchema(info[ii], [ CharacterInfo.basic.level, CharacterInfo.basic.level ]));
							display.appendChild(document.createElement("br"));
						}
					} else if (what[i] === "spells_schemas") {
						display = document.getElementById("spell-schemas-display");
						display.innerHTML = "";
						info = CharacterInfo.discreet_schemas;

						for (ii in info) if (info[ii].active && info[ii].display_in_section === "spells") {
							display.appendChild(formatSchema(info[ii], [ CharacterInfo.basic.level, CharacterInfo.basic.level ]));
							display.appendChild(document.createElement("br"));
						}
					} else if (what[i] === "log") {
						TOTAL_PAGES = (CharacterInfo.log.length % NUMBER_PER_PAGE) ? parseInt(CharacterInfo.log.length / NUMBER_PER_PAGE) : parseInt(CharacterInfo.log.length / NUMBER_PER_PAGE) - 1;
						PAGE = TOTAL_PAGES;
						let end, nav, next, page, prev, start;

						document.getElementById("log-display").innerHTML = "";
						for (ii = PAGE * NUMBER_PER_PAGE; ii < (PAGE + 1) * NUMBER_PER_PAGE; ii++) {
							if (CharacterInfo.log[ii]) { document.getElementById("log-display").innerHTML += "<p>" + CharacterInfo.log[ii] + "</p>"; }
							else { break; }
						}
						document.getElementById("log-display").innerHTML += "<br>";

						// Create a navigation element to hold the log navigation links
						nav = document.createElement("nav");

						// Create the navigation button to go to the previous set of log entries
						prev = document.createElement("a");
						prev.setAttribute("href", "#");
						prev.appendChild(document.createTextNode("←prev"));
						prev.addEventListener("click", function() {
								PAGE--;
								update([ "log" ]);
						});
						if (PAGE > 0) { nav.appendChild(prev); }

						// Create the page number navigation buttons
						if (TOTAL_PAGES > 9) { // More than 9 pages of log entries
							if (PAGE + 1 < 5) { start = 1; }
							else if (PAGE + 1 > TOTAL_PAGES - 4) { start = TOTAL_PAGES - 7; }
							else { start = (PAGE + 1) - 4; }
							end = start + 9;
						} else {
							start = 1;
							end = TOTAL_PAGES + 2;
						}

						for (ii = start; ii < end; ii++) {
							if (ii !== PAGE + 1) {
								page = document.createElement("a");
								page.setAttribute("href", "#");
								page.appendChild(document.createTextNode(ii));
								page.addEventListener("click", function() {
									PAGE = parseInt(event.target.innerHTML) - 1;
									update([ "log" ]);
								});
								nav.appendChild(page);
							} else {
								nav.appendChild(document.createTextNode(ii));
							}
						}

						next = document.createElement("a");
						next.setAttribute("href", "#");
						next.appendChild(document.createTextNode("next→"));
						next.addEventListener("click", function() {
								PAGE++;
								update([ "log" ]);
						});
						if (PAGE < TOTAL_PAGES) { nav.appendChild(next); }

						document.getElementById("log-display").appendChild(nav);
						document.getElementById("log-box").value = "";
					}
				}
			}

			function formatSchema(schema, levels=[1, 20]) {
				let table = document.createElement("TABLE");
				let caption = table.createCaption();
				let header = table.createTHead();
				let row, cell0, cell1, th0, th1;
				let th = [];
				let i, ii;

				// Building the table
				caption.innerHTML = schema["name"];
				if (typeof schema["list_by_level"][0] === "string") {
					// For those schemas that are just a single element like rage damage or ki points
					row = header.insertRow(0);
					th0 = document.createElement("TH");
					th0.innerHTML = "Level";
					row.appendChild(th0);
					th1 = document.createElement("TH");
					th1.style.textTransform = "capitalize";
					th1.innerHTML = schema["description"];
					row.appendChild(th1);

					// Fill out the table body
					for (i = levels[0] - 1; i < levels[1]; i++) {
						row = table.insertRow(-1);
						cell0 = row.insertCell(0);
						cell1 = row.insertCell(1);
						cell0.innerHTML = formatLevel(i + 1);
						cell1.innerHTML = (schema["list_by_level"][i] !== "0") ? schema["list_by_level"][i] : "–";
					}
				} else {
					// This is more complicated. Spell slots have levels for each of them so we use a nested type header with 2 rows.
					// The first is the standard level and title row, whereas the second is under the title row and holds cells for each spell level.
					row = header.insertRow(0);
					th0 = document.createElement("TH");
					th0.rowSpan = 2; // Make the level (first cell) occupy both rows.
					th0.innerHTML = "Level";
					th1 = document.createElement("TH");
					th1.colSpan = schema["list_by_level"][0].length; // The title (second cell) needs to stretch to occupy all the slot level cells under it.
					th1.style.textTransform = "capitalize";
					th1.innerHTML = schema["description"];
					row.appendChild(th0);
					row.appendChild(th1);

					// This is the start of building the second row
					row = header.insertRow(-1);
					for (i = 0; i < schema["list_by_level"][0].length; i++) {
						th[i] = document.createElement("TH");
						th[i].id = i + 1;
						th[i].innerHTML = formatLevel(i + 1);
						row.appendChild(th[i]);
					}

					// Fill out the table body
					for (i = levels[0] - 1; i < levels[1]; i++) {
						row = table.insertRow(-1)
						cell0 = row.insertCell(0);
						cell0.innerHTML = formatLevel(i + 1);

						// Place all the slot information under the correct slot header in the second header row
						for (ii = 0; ii < schema["list_by_level"][i].length; ii++) {
							cell1 = row.insertCell(ii + 1);
							cell1.header = ii + 1; // This will assign the correct header
							cell1.innerHTML = (schema["list_by_level"][i][ii] !== "0") ? schema["list_by_level"][i][ii] : "–";
						}
					}
				}

				return table;
			}

			function formatLevel(level) {
				var text = level;
				if (level === 1) {
							text += "st";
						} else if (level === 2) {
							text += "nd";
						} else if (level === 3) {
							text += "rd";
						} else {
							text += "th";
						}

				return text;
			}

			function getModifier(ability) {
				return Math.floor((ability - 10) / 2);
			}

			function getProficiency() {
				if (CharacterInfo["basic"]["level"] >= 1 && CharacterInfo["basic"]["level"] <= 4) {
					return 2;
				} else if (CharacterInfo["basic"]["level"] >= 5 && CharacterInfo["basic"]["level"] <= 8) {
					return 3;
				} else if (CharacterInfo["basic"]["level"] >= 9 && CharacterInfo["basic"]["level"] <= 12) {
					return 4;
				} else if (CharacterInfo["basic"]["level"] >= 13 && CharacterInfo["basic"]["level"] <= 16) {
					return 5;
				}
				return 6;
			}

			function emptyTable(element) {
			var table = document.getElementById(element);
			var rowCount = table.rows.length;
				if (rowCount > 1) {
					for (i = 1; i < rowCount; i++) {
						table.deleteRow(-1); // Each pass deletes the last row in the table.
					}
				}
			}

			function openSection(evt, content) {
				var tabContent, tabLinks;

				tabContent = document.getElementsByClassName("tabcontent");
				for (i =0; i < tabContent.length; i++) {
					tabContent[i].style.display = "none";
				}

				tabLinks = document.getElementsByClassName("tablinks");
				for (i = 0; i < tabLinks.length; i++) {
					tabLinks[i].className = tabLinks[i].className.replace(" active", "");
				}

				document.getElementById(content).style.display = "block";
				evt.currentTarget.className += " active";
			}

			function fallbackCopyToClipboard(text) {
				let textArea = document.createElement("textarea");
				textArea.value = text;
				textArea.style.top = "0";
				textArea.style.left = "0";
				textArea.style.position = "fixed";
				document.appendChild(textArea);
				textArea.focus();
				textArea.select();

				try {
					let success = document.execCommand("copy");
				} catch (e) {
					alert("Sorry! Something went wrong while copying the data to the clipboard.");
				}

				document.bodyRemoveChild(textArea);
			}

			function copyToClipboard(text) {
				if (!navigator.clipboard) {
					fallbackCopyToClipboard(text);
					return;
				}

				navigator.clipboard.writeText(text);
			}
		</script>
	</body>
</html>